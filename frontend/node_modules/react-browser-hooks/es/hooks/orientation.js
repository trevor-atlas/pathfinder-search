import { useState, useEffect } from 'react';
import { IS_SERVER } from '../constants';

var defaultState = {
  angle: 0,
  type: 'landscape-primary'
};

export function useOrientation() {
  var currentOrientation = !IS_SERVER && window.screen.orientation ? window.screen.orientation : defaultState;

  var _useState = useState(currentOrientation),
      state = _useState[0],
      setState = _useState[1];

  useEffect(function () {
    var handler = function handler() {
      return setState(window.screen.orientation);
    };

    window.addEventListener('orientationchange', handler);
    return function () {
      return window.removeEventListener('orientationchange', handler);
    };
  }, []);

  return state;
}