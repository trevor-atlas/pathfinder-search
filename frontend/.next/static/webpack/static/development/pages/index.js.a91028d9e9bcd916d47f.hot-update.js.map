{"version":3,"file":"static/webpack/static/development/pages/index.js.a91028d9e9bcd916d47f.hot-update.js","sources":["webpack:///./pages/index.tsx"],"sourcesContent":["import {\n    Box,\n    Container,\n    FormControl,\n    FormControlLabel,\n    FormLabel,\n    Grid,\n    InputBase,\n    Paper,\n    Radio,\n    RadioGroup\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { makeStyles } from '@material-ui/styles';\nimport React, { useEffect, useState } from 'react';\nimport { VirtualizedList } from '../components/VirtualizedList';\nimport { useDebounce } from '../utils/debounce';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n        '& > *': {\n            // @ts-ignore\n            width: '25ch',\n        },\n    },\n    menuButton: {\n        marginRight: '1em'\n    },\n    title: {\n        flexGrow: 1,\n        display: 'none',\n    },\n    paper: {\n        padding: '1em',\n        color: '#333'\n    },\n    search: {\n        position: 'relative',\n        borderRadius: 20,\n        backgroundColor: '#eee',\n        '&:hover': {\n            backgroundColor: '#ddd',\n        },\n        marginLeft: 0,\n        width: '100%',\n    },\n    searchIcon: {\n        padding: '0 1em',\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        color: '#234599'\n    },\n    inputRoot: {\n    },\n\n    inputInput: {\n        padding: '1em 1em 1em 0',\n        // vertical padding + font size from searchIcon\n        paddingLeft: `calc(1em + 25px)`,\n        width: '100%',\n    },\n}));\n\nconst Index = () => {\n    const classes = useStyles();\n    const [type, setType] = useState('spells');\n    const [query, setQuery] = useState('');\n    const [selected, setSelected] = useState({}as any);\n    const [isLoading, setIsLoading] = useState(false);\n    const [data, setData] = useState({\n        setSelected,\n        results: [],\n        type\n    });\n\n    const debouncedSearchTerm = useDebounce(query, 500);\n\n    const handleTypeChange = (event) => {\n        setType(event.target.value);\n    };\n\n    useEffect(() => {\n        (async () => {\n            if (debouncedSearchTerm) {\n                setIsLoading(true);\n                try {\n\n                const result = await fetch(`http://localhost:8080?query=${query}&type=${type}`);\n                const data = await result.json();\n                setData({\n                    setSelected,\n                    results: data,\n                    type\n                });\n\n                } catch(err) {\n                    setData({\n                        setSelected,\n                        results: [],\n                        type\n                    })\n                }\n                setIsLoading(false);\n            } else {\n            }\n        })()\n    }, [debouncedSearchTerm, type]);\n\n    return (\n        <Container maxWidth=\"xl\">\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={2}>\n                    <Paper className={classes.paper}>\n                        <Box m={2}>\n                            <div className={classes.search}>\n                                <div className={classes.searchIcon}>\n                                    <SearchIcon />\n                                </div>\n                                <InputBase\n                                    placeholder=\"Searchâ€¦\"\n                                    onChange={(e) => setQuery(e.target.value)}\n                                    classes={{\n                                        root: classes.inputRoot,\n                                        input: classes.inputInput,\n                                    }}\n                                    inputProps={{ 'aria-label': 'search' }}\n                                />\n                            </div>\n                        </Box>\n                        <FormControl component=\"fieldset\">\n                            <FormLabel component=\"legend\">Query Type</FormLabel>\n                            <RadioGroup aria-label=\"Query Type\" name=\"gender1\" value={type} onChange={handleTypeChange}>\n                                <FormControlLabel value=\"feats\" control={<Radio />} label=\"Feats\" />\n                                <FormControlLabel value=\"monsters\" control={<Radio />} label=\"Monsters\" />\n                                <FormControlLabel value=\"spells\" control={<Radio />} label=\"Spells\" />\n                                <FormControlLabel value=\"items\" control={<Radio />} label=\"Items\" />\n                            </RadioGroup>\n                        </FormControl>\n                    </Paper>\n                </Grid>\n                <Grid item xs={12} md={4}>\n                    {isLoading ? (\n                        <h2>Loading ...</h2>\n                    ) : (\n                        data.results\n                        && data.results.length\n                        && <VirtualizedList itemData={data} />\n                       || <h2>No Results</h2>\n                    )}\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Paper className={classes.paper}>\n                        {selected\n                        && Object.entries(selected)\n                            .filter(([key, value]) =>\n                                value\n                                && key\n                                && value != 'NULL'\n                                && key != 'full_text'\n                                && key != 'description_formatted'\n                            )\n                            .map(([key, value], i) => {\n                            return (\n                                <p key={key + i}><strong>{humanize(key)}:</strong> <span>{humanize(value)}</span></p>\n                            )\n                        })}\n                    </Paper>\n                </Grid>\n            </Grid>\n        </Container>\n\n    )\n};\n\nconst humanize = (str) => {\n    if (!str) return str;\n    if (typeof str !== 'string') return str;\n    return str.trim().replace('_', ' ');\n}\n\nexport default Index;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAYA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAOA;AACA;AADA;AAGA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AARA;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AAGA;AACA;AACA;AACA;AACA;AAJA;AA1CA;AAAA;AACA;AAiDA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAOA;AACA;AACA;AAHA;AANA;AAAA;AACA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AACA;AADA;AAMA;AACA;AACA;AACA;AACA;AAHA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AAcA;AACA;AACA;AACA;AAHA;AACA;AAfA;AAoBA;AApBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AACA;AADA;AAAA;AAOA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}